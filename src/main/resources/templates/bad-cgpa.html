<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Bad CGPA Calculator</title>
    <script>
        function updateSGPAInputs() {
            const semCount = document.getElementById("semestersCompleted").value;
            const sgpaInputs = document.getElementById("sgpaInputs");
            sgpaInputs.innerHTML = '';
            for (let i = 1; i <= semCount; i++) {
                sgpaInputs.innerHTML += `<div class='input-row'><label><i class='fas fa-warning'></i> Semester ${i} SGPA:</label>
                  <input type='number' step='0.01' min='0' max='10' name='sgpaList[${i-1}]' required></div>`;
            }
        }
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg,#ffdde1 0%,#ff8080 100%); min-height: 100vh; margin:0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .navbar { background: #dc3545; padding: 18px 23px; color: white; display: flex; gap: 22px; align-items: center; }
        .navbar a { color: white; margin-right:18px; text-decoration: none; font-weight: 500; }
        .navbar .active { text-decoration: underline; font-weight:700; }
        .navbar a:hover { text-decoration: underline; }
        .badge { background: #c82333; color:white; border-radius:8px; padding:6px 14px; display:inline-block; margin-left:16px; font-weight:700; font-size: 1rem; letter-spacing: 1px; }
        .container { background: white; border-radius:16px; box-shadow:0 10px 38px rgba(236,40,40,.13); max-width:480px; margin:32px auto; padding:38px 32px 28px 32px; }
        h2 { margin-top: 0; color:#c82333; text-align:center; margin-bottom:10px; font-size:1.65rem; }
        form { margin-top:32px; }
        label { font-weight: 500; color: #a02e2e; margin-bottom:6px; display:block; }
        .input-row { margin-bottom:18px; }
        input[type="number"] { border-radius:8px; border:1.5px solid #ffd5d5; padding:13px 14px; width:86%; font-size:.99rem; margin-left:8px; margin-bottom:2px; background:#ffeaea; }
        input[type="number"]:focus { outline:none; border-color:#dc3545; background:white; box-shadow:0 0 0 3px #fd9fb1a0; }
        button { background: linear-gradient(135deg,#ff5a5f 0%,#dc3545 100%); border:none; color:white; padding:17px 0; border-radius:10px; width:100%; margin-top:12px; font-size:1.16rem; font-weight:700; cursor:pointer; transition:box-shadow 0.2s; box-shadow:0 3px 9px #c8233310; }
        button:hover { box-shadow:0 10px 24px #fd9fb11a; background:linear-gradient(135deg,#dc3545 0%,#ff5a5f 100%);}
        .result-card { background:#fff2f3; border-left:5px solid #dc3545; border-radius:13px; margin-top:30px; padding:27px 25px; box-shadow:0 2px 10px #dc354511; text-align:center; }
        .result-title { color:#dc3545; font-size:1.4rem; margin-bottom:15px; } .result-icon { font-size:2.2rem; color:#dc3545; }
        .result-number { font-size:2.05rem; font-weight:700; color:#dc3545; }
        .result-label { color:#a14242; text-transform:uppercase; font-size:.92rem; margin-bottom:16px; }
        .help { color:#af3737; background:#ffeaea; padding:13px 13px 11px 14px; border-radius:8px; margin-bottom:16px; font-size:.98rem; }
        .warning-msg { color:#c82333; font-weight:700; background: #fffbea; padding:10px 14px 10px 17px; border-radius:10px; margin-top:23px; font-size:1rem; border-left: 4px solid #fd7e14;}
        @media(max-width:560px) { .container{padding:9vw 3vw;} h2{font-size:1.18rem;} }
    </style>
</head>
<body>
<div class="navbar">
  <a href="/" >SQA Home</a>
  <a href="/good-cgpa">Good Example</a>
  <a href="/bad-cgpa" class="active">Bad Calculator</a>
  <span class="badge"><i class="fas fa-times-circle"></i> Bad Example</span>
</div>
<div class="container">
    <h2><i class="fas fa-exclamation-triangle"></i> Bad CGPA Calculator</h2>
    <div class="help"><i class="fas fa-bug"></i> This calculator contains intentional mistakes to demonstrate software quality issues.</div>
    <form method="post" th:action="@{/bad-cgpa}" th:object="${request}">
        <div class="input-row">
        <label for="semestersCompleted"><i class="fas fa-list-ol"></i> Number of Semesters Completed:</label>
        <input type="number" id="semestersCompleted" name="semestersCompleted" min="1" max="8" th:value="*{semestersCompleted}" onchange="updateSGPAInputs()" required>
        </div>
        <div id="sgpaInputs">
            <!-- SGPA inputs dynamically inserted here -->
        </div>
        <button type="submit"><i class="fas fa-calculator"></i> Calculate CGPA &amp; Percentage</button>
    </form>
    <script>
    window.onload = function() {
        const semField = document.getElementById('semestersCompleted');
        if (semField.value) updateSGPAInputs();
    };
    </script>
    <div th:if="${result != null}" class="result-card">
        <div class="result-title"><span class="result-icon"><i class="fas fa-bug"></i></span> Bad Calculation</div>
        <div class="result-number" th:text="${result.cgpa}"></div>
        <div class="result-label">CGPA</div>
        <div class="result-number" th:text="${result.percentage}"></div>
        <div class="result-label">Percentage</div>
        <div class="warning-msg"><i class="fas fa-exclamation-circle"></i> The above result is intentionaly flawed for SQA demo purposes!</div>
    </div>
</div>
</body>
</html>
